<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>ERC721 &amp; NFT | YU-UJ</title><meta name="keywords" content="BlockChain,ERC721,SmartContract,NFT"><meta name="author" content="yu-uj"><meta name="copyright" content="yu-uj"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#2C4373"><meta name="description" content="ERC721 &amp; NFT ERC-721 함수의 기능ERC-721 표준에 정의된 함수 9개   함수명 속성    balanceOf owner가 소유한 NFT의 갯수 반환   ownerOf 특정 tokenId를 가진 NFT의 소유주 주소를 반환   approve 특정 계정에게 자신이 소유한 NFT 하나를 사용하도록 허용   getApproved 특정 NF">
<meta property="og:type" content="article">
<meta property="og:title" content="ERC721 &amp; NFT">
<meta property="og:url" content="http://yu-uj.github.io/2022/07/20/erc721method/index.html">
<meta property="og:site_name" content="YU-UJ">
<meta property="og:description" content="ERC721 &amp; NFT ERC-721 함수의 기능ERC-721 표준에 정의된 함수 9개   함수명 속성    balanceOf owner가 소유한 NFT의 갯수 반환   ownerOf 특정 tokenId를 가진 NFT의 소유주 주소를 반환   approve 특정 계정에게 자신이 소유한 NFT 하나를 사용하도록 허용   getApproved 특정 NF">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://yu-uj.github.io/img/darksea.jpg">
<meta property="article:published_time" content="2022-07-20T14:32:38.000Z">
<meta property="article:modified_time" content="2023-05-01T14:37:13.319Z">
<meta property="article:author" content="yu-uj">
<meta property="article:tag" content="BlockChain">
<meta property="article:tag" content="ERC721">
<meta property="article:tag" content="SmartContract">
<meta property="article:tag" content="NFT">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://yu-uj.github.io/img/darksea.jpg"><link rel="shortcut icon" href="/img/favighost.png"><link rel="canonical" href="http://yu-uj.github.io/2022/07/20/erc721method/"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//www.google-analytics.com" crossorigin><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-EKXH2KF4FY"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-EKXH2KF4FY');
</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'days',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isAnchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'ERC721 & NFT',
  isPost: true,
  isHome: false,
  isHighlightShrink: undefined,
  isToc: true,
  postUpdate: '2023-05-01 23:37:13'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#2C4373')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/rss2.xml" title="YU-UJ" type="application/rss+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">Loading...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://avatars.githubusercontent.com/u/99964401?v=4" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">23</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">63</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">5</div></a></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/darksea.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">YU-UJ</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">ERC721 &amp; NFT</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="fa-fw post-meta-icon far fa-calendar-alt"></i><span class="post-meta-label">Created</span><time datetime="2022-07-20T14:32:38.000Z" title="Created 2022-07-20 23:32:38">2022-07-20</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/BLOCKCHAIN/">BLOCKCHAIN</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id data-flag-title="ERC721 &amp; NFT"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="ERC721-amp-NFT"><a href="#ERC721-amp-NFT" class="headerlink" title="ERC721 &amp; NFT"></a>ERC721 &amp; NFT</h1><hr>
<h2 id="ERC-721-함수의-기능"><a href="#ERC-721-함수의-기능" class="headerlink" title="ERC-721 함수의 기능"></a>ERC-721 함수의 기능</h2><h3 id="ERC-721-표준에-정의된-함수-9개"><a href="#ERC-721-표준에-정의된-함수-9개" class="headerlink" title="ERC-721 표준에 정의된 함수 9개"></a>ERC-721 표준에 정의된 함수 9개</h3><table>
<thead>
<tr>
<th>함수명</th>
<th>속성</th>
</tr>
</thead>
<tbody><tr>
<td>balanceOf</td>
<td>owner가 소유한 NFT의 갯수 반환</td>
</tr>
<tr>
<td>ownerOf</td>
<td>특정 tokenId를 가진 NFT의 소유주 주소를 반환</td>
</tr>
<tr>
<td>approve</td>
<td>특정 계정에게 자신이 소유한 NFT 하나를 사용하도록 허용</td>
</tr>
<tr>
<td>getApproved</td>
<td>특정 NFT가 다른 계정에게 사용 승인되었는지의 여부 반환</td>
</tr>
<tr>
<td>setApprovalForAll</td>
<td>특정 계정에게 자신이 소유한 NFT에 대한 사용을 허용</td>
</tr>
<tr>
<td>isApprovedForAll</td>
<td>owner가 특정 계정에게 자신의 모든 NFT에 대한 사용을 허용했는지의 여부 반환</td>
</tr>
<tr>
<td>transferFrom</td>
<td>NFT 소유권 전송</td>
</tr>
<tr>
<td>safeTransferFrom</td>
<td>받는 주소가 NFT를 받을 수 있는지 확인 후 NFT 소유권 전송</td>
</tr>
<tr>
<td>safeTransferFrom</td>
<td>받는 주소가 NFT를 받을 수 있는지 확인 후 NFT 소유권 전송</td>
</tr>
</tbody></table>
<p>ERC-721에는 9개의 표준 함수가 정의되어 있는데, 이 <strong>표준 함수를 포함한 컨트랙트를 통해 민팅된 토큰이 바로 NFT</strong> 이다.</p>
<p>→ <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/token/ERC721/ERC721.sol">OpenZeppeling에서 제공하는 ERC-721 API</a>에 구현된 코드를 사용하여 각각의 함수가 하는 역할에 대해 확인.</p>
<br>

<h3 id="변수"><a href="#변수" class="headerlink" title="변수"></a>변수</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">string private _name;</span><br><span class="line">string private _symbol;</span><br><span class="line">mapping(uint256 =&gt; address) private _owners;</span><br><span class="line">mapping(address =&gt; uint256) private _balances;</span><br><span class="line">mapping(uint256 =&gt; address) private _tokenApprovals;</span><br><span class="line">mapping(address =&gt; mapping(address =&gt; bool)) private _operatorApprovals;</span><br></pre></td></tr></table></figure>

<br>

<ul>
<li><strong><code>name</code></strong><ul>
<li><strong>토큰의 이름</strong>을 저장</li>
</ul>
</li>
<li><strong><code>_symbol</code></strong><ul>
<li><strong>토큰의 심볼</strong>을 저장<ul>
<li>이름이 Bored Ape Yacht Club인 토큰의 심볼은 BAYC이다.</li>
</ul>
</li>
</ul>
</li>
<li><strong><code>_owners</code></strong><ul>
<li>각 <strong>토큰의 ID</strong>와 <strong>토큰 소유자의 주소</strong>를 <strong>매핑</strong></li>
</ul>
</li>
<li><strong><code>_balances</code></strong><ul>
<li><strong>토큰 소유자의 주소</strong>와 <strong>소유자가 가지고 있는 토큰의 갯수</strong>를 <strong>매핑</strong></li>
</ul>
</li>
<li><strong><code>_tokenApprovals</code></strong><ul>
<li><strong>토큰 ID</strong>와 <strong>approved 된 주소</strong>를 <strong>매핑</strong></li>
</ul>
</li>
<li><strong><code>_operatorApprovals</code></strong><ul>
<li><strong>토큰 소유자</strong>와 <strong>operator 주소</strong>의 <strong>approval 여부</strong>를 저장<ul>
<li><p><strong>e.g.</strong> 0x1234가 0x5678에게 <strong>자신의 모든 토큰을 관리</strong>할 수 있는 <strong>operator 권한</strong>을 준 경우</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">_operatorApprovals[0x1234][0x5678] // true</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>e.g.</strong> 0x1234가 0x5678의 <strong>operator 권한을 취소</strong>한 경우</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">_operatorApprovals[0x1234][0x5678] // false</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
</ul>
<br>

<h3 id="balanceOf-address-owner-→-uint256"><a href="#balanceOf-address-owner-→-uint256" class="headerlink" title="balanceOf(address owner) → uint256"></a>balanceOf(address owner) → uint256</h3><p><strong><code>balanceOf()</code></strong> 함수는 <strong>owner 주소</strong>가 가지고 있는 <strong>NFT의 갯수를 리턴</strong>한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function balanceOf(address owner) public view virtual override returns (uint256) &#123;</span><br><span class="line">	require(owner != address(0), &quot;ERC721: address zero is not a valid owner&quot;);  // owner의 주소가 0인 경우</span><br><span class="line">	return _balances[owner];  // _balances 변수에 매핑된 값을 가져온다</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<h3 id="ownerOf-uint256-tokenId-→-address"><a href="#ownerOf-uint256-tokenId-→-address" class="headerlink" title="ownerOf(uint256 tokenId) → address"></a>ownerOf(uint256 tokenId) → address</h3><p>모든 NFT는 <strong>발행된 컨트랙트 내</strong>에서 <strong>고유한 token ID</strong>를 가지고 있다. 따라서 <strong>컨트랙트 주소와 token ID</strong>만 있으면 <strong>NFT의 정보에 접근</strong>할 수 있다.</p>
<p><strong><code>ownerOf()</code></strong> 함수는 <strong>token ID</strong>를 통해 <strong>토큰 owner의 주소를 반환</strong>한다.</p>
<br>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function ownerOf(uint256 tokenId) public view virtual override returns (address) &#123;</span><br><span class="line">	address owner = _owners[tokenId];  // _owners 변수에는 token ID와 owner의 주소가 매핑되어 있다 </span><br><span class="line">	require(owner != address(0), &quot;ERC721: invalid token ID&quot;); </span><br><span class="line">	return owner;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<h3 id="approve-address-to-uint256-tokenId"><a href="#approve-address-to-uint256-tokenId" class="headerlink" title="approve(address to, uint256 tokenId)"></a>approve(address to, uint256 tokenId)</h3><p><strong><code>approve()</code></strong> 함수는 <strong>특정 tokenId</strong>를 <strong>제삼자가 사용할 수 있도록 승인(approve)</strong> 할 수 있다.</p>
<p><strong><code>approve()</code></strong> 를 통해 <strong>tokenId 사용을 승인받은 제삼자</strong>는 <strong>operator</strong>라고 부르고, operator는 이 t<strong>okenId를 다른 스마트 컨트랙트에 사용</strong>하거나 <strong>다시 approve</strong> 할 수 있다.</p>
<p><strong><code>approve()</code></strong> 함수는 <strong>소유권을 승인하는 행위</strong>라서 <strong>tokenId의 owner나 operator만 호출</strong> 가능하다.</p>
<br>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">function approve(address to, uint256 tokenId) public virtual override &#123;</span><br><span class="line">	// 유효성 검사 1. operator(to)의 주소와 토큰의 owner가 동일인인지 확인</span><br><span class="line">	address owner = ERC721.ownerOf(tokenId);</span><br><span class="line">	require(to != owner, &quot;ERC721: approval to current owner&quot;);</span><br><span class="line"></span><br><span class="line">	// 유효성 검사 2. approve 함수를 호출한 사람과 토큰의 owner가 동일한지 확인</span><br><span class="line">	require(</span><br><span class="line">		_msgSender() == owner || isApprovedForAll(owner, _msgSender()),</span><br><span class="line">		&quot;ERC721: approve caller is not token owner nor approved for all&quot;</span><br><span class="line">	);</span><br><span class="line"></span><br><span class="line">	_approve(to, tokenId);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function _approve(address to, uint256 tokenId) internal virtual &#123;</span><br><span class="line">	_tokenApprovals[tokenId] = to;  // _tokenApprovals 변수에 tokenId와 approve된 operator의 주소를 매핑한다</span><br><span class="line">	emit Approval(ERC721.ownerOf(tokenId), to, tokenId);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<h3 id="getApproved-uint256-tokenid-→-address"><a href="#getApproved-uint256-tokenid-→-address" class="headerlink" title="getApproved(uint256 tokenid) → address"></a>getApproved(uint256 tokenid) → address</h3><p><strong><code>getApproved()</code></strong> 함수는 <strong>token ID</strong>가 누구에게 <strong>승인(approve)된 상태</strong>면, 해당 <strong>승인된 operator 주소를 반환</strong>한다.</p>
<br>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function getApproved(uint256 tokenId) public view virtual override returns (address) &#123;	</span><br><span class="line">	return _tokenApprovals[tokenId];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<h3 id="setApprovalForAll-address-to-bool-approved"><a href="#setApprovalForAll-address-to-bool-approved" class="headerlink" title="setApprovalForAll(address to, bool approved)"></a>setApprovalForAll(address to, bool approved)</h3><p><strong><code>setApprovalForAll()</code></strong> 함수는 <strong>함수를 호출</strong>한 <code>msg.sender</code> 가 이 <strong>컨트랙트에서 가지고 있는 모든 NFT</strong>를 <strong>특정 operator 에게 승인</strong>하는 함수.</p>
<p><strong>ApprovalForAll 이벤트 실행</strong> 함수.</p>
<ul>
<li><strong>첫번째 인자 <code>to</code> : operator의 주소</strong></li>
<li><strong>두번째 인자 <code>approved</code> : 승인 여부</strong><ul>
<li><strong>approved → <code>true</code></strong> : <code>to</code> 주소에게 <strong>모든 NFT의 사용을 승인</strong></li>
<li><strong>approved →</strong> <strong><code>false</code></strong> : operator인 <code>to</code> 주소로부터 <strong>NFT 사용 승인 철회</strong></li>
</ul>
</li>
</ul>
<br>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function setApprovalForAll(address operator, bool approved) public virtual override &#123;</span><br><span class="line">	_setApprovalForAll(_msgSender(), operator, approved);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function _setApprovalForAll(address owner, address operator, bool approved) internal virtual &#123;</span><br><span class="line">	require(owner != operator, &quot;ERC721: approve to caller&quot;);  // 컨트랙트를 호출한 msg.sender와 approve를 주려는 operator가 동일한지 확인</span><br><span class="line">	_operatorApprovals[owner][operator] = approved;  // _opeatorApprovals에 owner와 operator, 그리고 approve 여부가 매핑</span><br><span class="line">	emit ApprovalForAll(owner, operator, approved);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<ul>
<li><p>❓<strong>more</strong></p>
<blockquote>
<p><strong>ERC-20에는 setApprovalForAll() 함수가 표준으로 지정되어 있지 않으나, ERC-721에는 표준 함수로 등장함. ERC-20에서는 왜 setApprovalForAll() 함수를 사용하지 않을까?</strong></p>
<p>ERC-721에서 setApprovalForAll 함수는 함수를 호출한 sender가 해당 컨트랙트에서 가진 모든 NFT 토큰 전송 권한을 특정 operator에게 승인하거나 해제하는 용도로 사용 된다. 또한, 대체불가능을 위해 소유자와 operator가 동일하지는 않은지 확인하고, 전송 단계에서 송신주소에서 수신주소로 권한과 tokenId를 변경하는 과정이 있다. ERC-20에서는 FT, 즉, 대체 가능한 토큰을 발행한다. 전송시 송신주소에서 수신주소로 원하는 토큰 양을 설정하여 토큰을 보내기 때문에 위임할 토큰 수량을 정해둘 수 있다.</p>
</blockquote>
</li>
</ul>
<br>

<h3 id="isApprovedForAll-address-owner-address-operator-→-bool"><a href="#isApprovedForAll-address-owner-address-operator-→-bool" class="headerlink" title="isApprovedForAll(address owner, address operator) → bool"></a>isApprovedForAll(address owner, address operator) → bool</h3><p><strong><code>isApprovedForAll()</code></strong> 함수는 <strong>첫번째 인자 owner</strong>가 <strong>두번째 인자 operator 주소</strong>에게 <code>setApprovalForAll()</code> 함수를 통하여 <strong>모든 NFT를 승인했는가 여부</strong>를 전달.</p>
<ul>
<li><strong>return값 → <code>true</code></strong> : <code>setApprovalForAll()</code> 함수 호출해서 <strong>owner의 모든 NFT에 대해 operator에게 승인</strong>한 상태임.</li>
<li><strong>return값 → <code>false</code></strong> : <code>setApprovalForAll()</code> 함수를 <strong>호출한 적 없거나</strong>, setApprovalForAll() 을 호출해서 <strong>승인 철회한 상태</strong>임.</li>
</ul>
<br>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function isApprovedForAll(address owner, address operator) public view virtual override returns (bool) &#123;</span><br><span class="line">	return _operatorApprovals[owner][operator];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<h3 id="transferFrom-address-from-address-to-uint256-tokenId"><a href="#transferFrom-address-from-address-to-uint256-tokenId" class="headerlink" title="transferFrom(address from, address to, uint256 tokenId)"></a>transferFrom(address from, address to, uint256 tokenId)</h3><p><strong><code>transferFrom()</code><strong>은 <code>from</code> 주소에서 <code>to</code> 주소로 t</strong>okenId를 옮긴다</strong>. <code>from</code> 주소는 옮기려는 <strong>토큰의 owner 혹은 승인받은 operator</strong>여야 함.</p>
<aside>
➡️ But, 실제 NFT를 다른 주소로 이동시킬 때, `transferFrom()` 대신 `**safeTransferFrom()**` 을 사용하는 것을 권장.

</aside>

<br>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">function transferFrom(address from, address to, uint256 tokenId) public virtual override &#123;</span><br><span class="line">	require(_isApprovedOrOwner(_msgSender(), tokenId), &quot;ERC721: caller is not token owner nor approved&quot;);</span><br><span class="line"></span><br><span class="line">	_transfer(from, to, tokenId);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// tokenId가 spender의 소유이거나, spender에게 승인되었는지 확인 </span><br><span class="line">function _isApprovedOrOwner(address spender, uint256 tokenId) internal view virtual returns (bool) &#123;</span><br><span class="line">	address owner = ERC721.ownerOf(tokenId);</span><br><span class="line">	return (spender == owner || isApprovedForAll(owner, spender) || getApproved(tokenId) == spender);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function _transfer(address from, address to, uint256 tokenId) internal virtual &#123;</span><br><span class="line">	// 유효성 검사</span><br><span class="line">	require(ERC721.ownerOf(tokenId) == from, &quot;ERC721: transfer from incorrect owner&quot;);</span><br><span class="line">	require(to != address(0), &quot;ERC721: transfer to the zero address&quot;);</span><br><span class="line"></span><br><span class="line">	// 이전 owner(=from)가 승인했던 approvals를 모두 삭제</span><br><span class="line">	_approve(address(0), tokenId);</span><br><span class="line"></span><br><span class="line">	_balances[from] -= 1;  // 이전 owner의 NFT 보유 갯수 갱신</span><br><span class="line">	_balances[to] += 1;  // 현재 owner(=to)의 NFT 보유 갯수 갱신</span><br><span class="line">	_owners[tokenId] = to;  // tokenId의 owner를 to로 변경</span><br><span class="line"></span><br><span class="line">	emit Transfer(from, to, tokenId);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<h3 id="safeTransferFrom-address-from-address-to-uint256-tokenId"><a href="#safeTransferFrom-address-from-address-to-uint256-tokenId" class="headerlink" title="safeTransferFrom(address from, address to, uint256 tokenId)"></a>safeTransferFrom(address from, address to, uint256 tokenId)</h3><p>safeTransferFrom() 은 NFT를 받는 주소가 NFT를 받을 수 있는 주소인지 확인하는 특징이 있음.</p>
<ul>
<li><p>🔪**<code>transferFrom()</code> 함수의 문제**</p>
<blockquote>
<p>transferFrom()은 받는 주소가 NFT를 사용할 수 있는지 확인을 거치지 않고 보낸다.</p>
</blockquote>
<ul>
<li><p><strong>A 컨트랙트에서 I의 주소 0x1234 로 NFT를 전송</strong></p>
<p>  → A 컨트랙트 내부에 해당 NFT의 token ID의 owner가 0x1234로 설정됨 </p>
<p>  → I가 NFT를 다른 곳에 재전송을 원할시 A 컨트랙트의 transferFrom() 호출 트랜잭션을 생성하면 됨</p>
</li>
<li><p><strong>A 컨트랙트에서 B 컨트랙트의 주소록 NFT를 전송</strong></p>
<p>  ⇒ 사용자 계정(EOA) 뿐만 아닌, 스마트 컨트랙트도 계정을 가짐. 이를 Contract Account(;CA)라고 하는데, CA 또한 계정이라 계정 주소로 ERC-20 or ERC-721 토큰을 전송할 수 있음.</p>
<p>  → A 컨트랙트에서 B 컨트랙트 주소 0x5678에 NFT를 전송하면, A 컨트랙트 내부에 해당 NFT의 token ID의 owner가 0x5678로 설정됨.</p>
<p>  → 컨트랙트 계정은 ‘<strong>코드’</strong>에 의해 동작하기 때문에, 앞선 I 예시로는 I가 A 컨트랙트의 함수를 호출했지만, 컨트랙트 계정에는 ‘A 컨트랙트의 함수 transferFrom() 호출’ 수행 코드가 없다면 수신받은 NFT를 사용할 수 없다.</p>
<p>  → B 컨트랙트에 수신받은 NFT를 다루는 코드가 없을시, </p>
<p>  → NFT 소유권은 B 컨트랙트에 넘어왔으나, B 컨트랙트는 이 NFT를 다룰 수 있는 코드가 없어서 NFT를 사용할 수 없다. 해당 NFT는 존재해도 어디에서도 사용할 수 없이 잠기는 것이다.</p>
<p>  ⇒ 해당 문제 발생 방지를 위하여 A 컨트랙트는 B 컨트랙트가 NFT를 다룰 준비가 됐는지 여부를 검증함.</p>
</li>
</ul>
</li>
</ul>
<aside>
➡️ **A 컨트랙트가 B 컨트랙트가 NFT를 다룰 준비가 됐는지 확인할 수 있는 방법**  = **`onERC721Received` 함수**

</aside>

<br>

<p><strong># <code>onERC721Received</code> 함수</strong></p>
<p>→ A 컨트랙트에서 <strong><code>safeTransferFrom()</code> 함수 실행</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// safeTransferFrom() 내부적 구현</span><br><span class="line"></span><br><span class="line">function _safeTransfer(address from, address to, uint256 tokenId, bytes memory data) internal virtual &#123;</span><br><span class="line">	_transfer(from, to, tokenId);</span><br><span class="line">	require(_checkOnERC721Received(from, to, tokenId, data), &quot;ERC721: transfer to non ERC721Receiver implementer&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<p>→ <code>_transfer()</code> 함수를 실행해서 <strong>token ID의 소유권 변경</strong></p>
<p>→ <strong>require문</strong> 안의 <code>_checkOnERC721Received()</code> 함수 실행</p>
<p>→ <code>_checkOnERC721Received()</code> 함수는 B 컨트랙트에 <code>onERC721Received()</code> 함수가 <strong>제대로 구현됐는지 확인</strong>하는 함수</p>
<br>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">// _checkOnERC721Received 함수</span><br><span class="line"></span><br><span class="line">function _checkOnERC721Received(address from, address to, uint256 tokenId, bytes memory data) private returns (bool) &#123;</span><br><span class="line">	if (to.isContract()) &#123;</span><br><span class="line">		try IERC721Receiver(to).onERC721Received(_msgSender(), from, tokenId, data) returns (bytes4 retval) &#123;</span><br><span class="line">			return retval == IERC721Receiver.onERC721Received.selector;</span><br><span class="line">		&#125; catch (bytes memory reason) &#123;</span><br><span class="line">			if (reason.length == 0) &#123;</span><br><span class="line">				revert(&quot;ERC721: transfer to non ERC721Receiver implementer&quot;);</span><br><span class="line">			&#125; else &#123;</span><br><span class="line">				assembly &#123;</span><br><span class="line">					revert(add(32, reason), mload(reason))</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125; else &#123;</span><br><span class="line">		return true;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<ul>
<li><strong><code>try</code> 구문 확인하기</strong>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// _checkOnERC721Received 함수</span><br><span class="line"></span><br><span class="line">try IERC721Receiver(to).onERC721Received(_msgSender(), from, tokenId, data) returns (bytes4 retval) &#123;</span><br><span class="line">	// ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
  <strong><code>to</code></strong> → <strong>NFT를 수신</strong>하는 <strong>B 컨트랙트의</strong> <code>IERC721Receiver</code> <strong>인터페이스</strong>를 통해 구현된 <code>**onERC721Received()**</code> 실행</li>
</ul>
<p>→ <strong>B 컨트랙트</strong>의 <strong><code>onERC721Received()</code></strong> 함수 구현 확인</p>
<br>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// B 컨트랙트</span><br><span class="line"></span><br><span class="line">function onERC721Received(address msgSender, address nftContractAddress, uint256 _tokenId, bytes calldata _data) public virtual override returns (bytes4) &#123;</span><br><span class="line">	// 전달받은 NFT를 다루는 함수..</span><br><span class="line">	return this.onERC721Received.selector;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<p>→ <strong><code>onERC721Received()</code> 함수 안에 전달받은 NFT를 다루는 함수 작성</strong></p>
<p>→ NFT를 송신한 A 컨트랙트에게 자신이 onERC721Received() 함수를 가지고 있으며, 실행했음을 알려주기 위해 onERC721Received() 함수의 Selector를 반환한다.</p>
<ul>
<li>🔪 <strong>모든 컨트랙트 함수는 고유한 Selector 보유</strong>  ERC-165(Standard Interface Detection)를 통해서 <strong>모든 컨트랙트의 함수는 고유한 Selector</strong>를 가진다.  함수의 <strong>Selector</strong>는 <strong>함수의 아이디</strong>로 생각하며, <strong>Selector를 구하는 두 가지 방식</strong>이 있다.<blockquote>
<p>**1. 함수의 시그니처(함수명과 파라미터의 타입)**를 통해 함수의 시그니처를 <strong>keccak256으로 암호화하고, bytes4로 형변환.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// balanceOf(address) 함수의 Selector를 구하는 경우</span><br><span class="line">bytes4(keccak256(”balanceOf(address)”))</span><br></pre></td></tr></table></figure>

</blockquote>
<blockquote>
<ol start="2">
<li><strong>컨트랙트 내부 메서드의 Selector 속성</strong>을 통함.</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function onERC721Received(address msgSender, address nftContractAddress, uint256 _tokenId, bytes calldata _data) public virtual override returns (bytes4) &#123;</span><br><span class="line"> 	// 전달받은 NFT를 다루는 함수..</span><br><span class="line"> 	return this.onERC721Received.selector;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
</blockquote>
</li>
</ul>
<p>→ B 컨트랙트가 <code>onERC721Received()</code> 함수를 실행한 후, A 컨트랙트는 <strong>B 컨트랙트의</strong> <code>onERC721Received()</code> <strong>가 반환된 Selector</strong>가 <strong><code>IERC721Receiver</code> 인터페이스 표준</strong>에 맞춰 구현된 <code>onERC721Received()</code> 함수인지 확인.</p>
<br>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// _checkOnERC721Received 함수</span><br><span class="line">try IERC721Receiver(to).onERC721Received(_msgSender(), from, tokenId, data) returns (bytes4 retval) &#123;</span><br><span class="line">	return retval == IERC721Receiver.onERC721Received.selector;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<p>→ <strong><code>_checkOnERC721Received()</code></strong> 함수는 <strong>인터페이스 표준에 맞게 구현</strong>됐는지 여부에 따라서 <strong><code>true</code></strong> or <strong><code>false</code></strong> 값을 <strong>리턴</strong>.</p>
<br>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function _safeTransfer(address from, address to, uint256 tokenId, bytes memory data) internal virtual &#123;</span><br><span class="line">	_transfer(from, to, tokenId);</span><br><span class="line">	require(_checkOnERC721Received(from, to, tokenId, data), &quot;ERC721: transfer to non ERC721Receiver implementer&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<p>→ <code>_checkOnERC721Received()</code> 를 호출한 <code>_safeTransferFrom()</code> 은 <code>**_checkOnERC721Received()</code> 의 반환값**에 따라 <strong>정상적으로 transfer가 완료</strong> or <strong>실패로 판단되어 트랜잭션이 취소</strong>.</p>
<p><strong># 흐름</strong></p>
<br>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">function safeTransferFrom(address from, address to, uint256 tokenId) public virtual override &#123;</span><br><span class="line">	safeTransferFrom(from, to, tokenId, &quot;&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function safeTransferFrom(address from, address to, uint256 tokenId, bytes memory data) public virtual override &#123;</span><br><span class="line">	require(_isApprovedOrOwner(_msgSender(), tokenId), &quot;ERC721: caller is not token owner nor approved&quot;);</span><br><span class="line">	_safeTransfer(from, to, tokenId, data);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function _safeTransfer(address from, address to, uint256 tokenId, bytes memory data) internal virtual &#123;</span><br><span class="line">	_transfer(from, to, tokenId);</span><br><span class="line">	require(_checkOnERC721Received(from, to, tokenId, data), &quot;ERC721: transfer to non ERC721Receiver implementer&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function _checkOnERC721Received(</span><br><span class="line">        address from,</span><br><span class="line">        address to,</span><br><span class="line">        uint256 tokenId,</span><br><span class="line">        bytes memory data</span><br><span class="line">    ) private returns (bool) &#123;</span><br><span class="line">        if (to.isContract()) &#123;</span><br><span class="line">            try IERC721Receiver(to).onERC721Received(_msgSender(), from, tokenId, data) returns (bytes4 retval) &#123;</span><br><span class="line">                return retval == IERC721Receiver.onERC721Received.selector;</span><br><span class="line">            &#125; catch (bytes memory reason) &#123;</span><br><span class="line">                if (reason.length == 0) &#123;</span><br><span class="line">                    revert(&quot;ERC721: transfer to non ERC721Receiver implementer&quot;);</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    assembly &#123;</span><br><span class="line">                        revert(add(32, reason), mload(reason))</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            return true;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<br>

<hr>
<br>
</article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/BlockChain/">BlockChain</a><a class="post-meta__tags" href="/tags/ERC721/">ERC721</a><a class="post-meta__tags" href="/tags/SmartContract/">SmartContract</a><a class="post-meta__tags" href="/tags/NFT/">NFT</a></div><div class="post_share"><div class="social-share" data-image="/img/darksea.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/07/25/did/"><img class="prev-cover" src="/img/darksea.jpg" onerror="onerror=null;src='/img/darksea.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">DID (Decentralized Identity)</div></div></a></div><div class="next-post pull-right"><a href="/2022/06/14/dlt/"><img class="next-cover" src="/img/darksea.jpg" onerror="onerror=null;src='/img/darksea.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">분산원장기술 / 트랜잭션</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><div><a href="/2022/08/29/project2/" title="Project2 HALP ME!!"><img class="cover" src="/img/darksea.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-08-29</div><div class="title">Project2 HALP ME!!</div></div></a></div><div><a href="/2022/08/16/project1/" title="Project1 UnderTheSea"><img class="cover" src="/img/darksea.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-08-16</div><div class="title">Project1 UnderTheSea</div></div></a></div><div><a href="/2022/10/03/project3/" title="Project3 JDEX"><img class="cover" src="/img/darksea.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-10-03</div><div class="title">Project3 JDEX</div></div></a></div><div><a href="/2023/04/13/project4/" title="Project4 Bithumb Dagao Neo"><img class="cover" src="/img/darksea.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-04-13</div><div class="title">Project4 Bithumb Dagao Neo</div></div></a></div><div><a href="/2023/04/14/project5/" title="Project5 YDEX"><img class="cover" src="/img/darksea.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-04-14</div><div class="title">Project5 YDEX</div></div></a></div><div><a href="/2023/04/24/dex-defi/" title="DEX와 DeFi"><img class="cover" src="/img/darksea.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-04-24</div><div class="title">DEX와 DeFi</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comment</span></div></div><div class="comment-wrap"><div><div id="disqus_thread"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://avatars.githubusercontent.com/u/99964401?v=4" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"></div><div class="author-info__name">yu-uj</div><div class="author-info__description">BlockChain Dev</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">23</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">63</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">5</div></a></div><a id="card-info-btn" href="/profile/"><i class="fas fa-user-astronaut"></i><span>MY PROFILE</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/yu-uj" target="_blank" title="Github" rel="external nofollow noopener noreferrer"><i class="fab fa-github-alt"></i></a><a class="social-icon" href="https://www.instagram.com/yu_u.jin" target="_blank" title="Instagram" rel="external nofollow noopener noreferrer"><i class="fab fa-instagram"></i></a><a class="social-icon" href="mailto:yuuuj72@gmail.com" target="_blank" title="Email" rel="external nofollow noopener noreferrer"><i class="fas fa-paper-plane"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#ERC721-amp-NFT"><span class="toc-number">1.</span> <span class="toc-text">ERC721 &amp; NFT</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ERC-721-%ED%95%A8%EC%88%98%EC%9D%98-%EA%B8%B0%EB%8A%A5"><span class="toc-number">1.1.</span> <span class="toc-text">ERC-721 함수의 기능</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ERC-721-%ED%91%9C%EC%A4%80%EC%97%90-%EC%A0%95%EC%9D%98%EB%90%9C-%ED%95%A8%EC%88%98-9%EA%B0%9C"><span class="toc-number">1.1.1.</span> <span class="toc-text">ERC-721 표준에 정의된 함수 9개</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EB%B3%80%EC%88%98"><span class="toc-number">1.1.2.</span> <span class="toc-text">변수</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#balanceOf-address-owner-%E2%86%92-uint256"><span class="toc-number">1.1.3.</span> <span class="toc-text">balanceOf(address owner) → uint256</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ownerOf-uint256-tokenId-%E2%86%92-address"><span class="toc-number">1.1.4.</span> <span class="toc-text">ownerOf(uint256 tokenId) → address</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#approve-address-to-uint256-tokenId"><span class="toc-number">1.1.5.</span> <span class="toc-text">approve(address to, uint256 tokenId)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#getApproved-uint256-tokenid-%E2%86%92-address"><span class="toc-number">1.1.6.</span> <span class="toc-text">getApproved(uint256 tokenid) → address</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#setApprovalForAll-address-to-bool-approved"><span class="toc-number">1.1.7.</span> <span class="toc-text">setApprovalForAll(address to, bool approved)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#isApprovedForAll-address-owner-address-operator-%E2%86%92-bool"><span class="toc-number">1.1.8.</span> <span class="toc-text">isApprovedForAll(address owner, address operator) → bool</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#transferFrom-address-from-address-to-uint256-tokenId"><span class="toc-number">1.1.9.</span> <span class="toc-text">transferFrom(address from, address to, uint256 tokenId)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#safeTransferFrom-address-from-address-to-uint256-tokenId"><span class="toc-number">1.1.10.</span> <span class="toc-text">safeTransferFrom(address from, address to, uint256 tokenId)</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/04/24/dex-defi/" title="DEX와 DeFi"><img src="/img/darksea.jpg" onerror="this.onerror=null;this.src='/img/darksea.jpg'" alt="DEX와 DeFi"></a><div class="content"><a class="title" href="/2023/04/24/dex-defi/" title="DEX와 DeFi">DEX와 DeFi</a><time datetime="2023-04-24T14:08:20.000Z" title="Created 2023-04-24 23:08:20">2023-04-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/04/21/programmers1/" title="Programmers - 중앙값 구하기"><img src="/img/darksea.jpg" onerror="this.onerror=null;this.src='/img/darksea.jpg'" alt="Programmers - 중앙값 구하기"></a><div class="content"><a class="title" href="/2023/04/21/programmers1/" title="Programmers - 중앙값 구하기">Programmers - 중앙값 구하기</a><time datetime="2023-04-21T02:12:35.000Z" title="Created 2023-04-21 11:12:35">2023-04-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/04/14/project5/" title="Project5 YDEX"><img src="/img/darksea.jpg" onerror="this.onerror=null;this.src='/img/darksea.jpg'" alt="Project5 YDEX"></a><div class="content"><a class="title" href="/2023/04/14/project5/" title="Project5 YDEX">Project5 YDEX</a><time datetime="2023-04-14T07:01:55.000Z" title="Created 2023-04-14 16:01:55">2023-04-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/04/13/project4/" title="Project4 Bithumb Dagao Neo"><img src="/img/darksea.jpg" onerror="this.onerror=null;this.src='/img/darksea.jpg'" alt="Project4 Bithumb Dagao Neo"></a><div class="content"><a class="title" href="/2023/04/13/project4/" title="Project4 Bithumb Dagao Neo">Project4 Bithumb Dagao Neo</a><time datetime="2023-04-13T13:47:43.000Z" title="Created 2023-04-13 22:47:43">2023-04-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/10/03/project3/" title="Project3 JDEX"><img src="/img/darksea.jpg" onerror="this.onerror=null;this.src='/img/darksea.jpg'" alt="Project3 JDEX"></a><div class="content"><a class="title" href="/2022/10/03/project3/" title="Project3 JDEX">Project3 JDEX</a><time datetime="2022-10-03T12:21:50.000Z" title="Created 2022-10-03 21:21:50">2022-10-03</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2023 By yu-uj</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="external nofollow noopener noreferrer" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">This is my  <a href="https://yu-uj.github.io/">Blog, Portfolio</a>.</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"></div></div><hr><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>function loadDisqus () {
  var disqus_config = function () {
    this.page.url = 'http://yu-uj.github.io/2022/07/20/erc721method/'
    this.page.identifier = '/2022/07/20/erc721method/'
    this.page.title = 'ERC721 & NFT'
  };

  window.disqusReset = () => {
    DISQUS.reset({
      reload: true,
      config: disqus_config
    })
  }

  if (window.DISQUS) disqusReset()
  else {
    (function() { 
      var d = document, s = d.createElement('script');
      s.src = 'https://yu-ujblog.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  }

  document.getElementById('darkmode').addEventListener('click', () => {
    setTimeout(() => window.disqusReset(), 200)
  })
}

if ('Disqus' === 'Disqus' || !false) {
  if (false) btf.loadComment(document.getElementById('disqus_thread'), loadDisqus)
  else loadDisqus()
} else {
  function loadOtherComment () {
    loadDisqus()
  }
}
</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>